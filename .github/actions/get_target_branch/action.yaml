name: Get_target_branch
description: "Gets target branch from the PR description"
inputs:
  body:
    description: "Text from which to extract the target branch"
    required: true
outputs:
  target-branch:
    description: "Target branch"
    value: ${{ steps.extract.outputs.target-branch }}

runs:
  using: composite
  steps:
    - name: Extract target branch
      id: extract
      if: ${{ contains(inputs.body, 'TARGET_BRANCH:') }}
      shell: bash
      run: |
        echo "target-branch=$(echo "${{ inputs.body }}" | grep -oP '(?<=TARGET_BRANCH:).*' | tr -d ' ')" >> $GITHUB_OUTPUT
