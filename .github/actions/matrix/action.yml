name: Get System Test Matrix
description: "Generates weblog matrix for each library"

inputs:
  library:
    description: Library name
    required: true
outputs:
  variant:
    description: "Matrix language/library and weblogs"
    value: ${{ steps.system-tests-matrix.outputs.variant }}
runs:
  using: composite
  steps:
    - name: Get matrix
      id: system-tests-matrix
      shell: bash
      #        echo "variant={\"variant\":[{\"library\":\"java\",\"weblog\":\"jersey-grizzly2\"},{\"library\":\"java\",\"weblog\":\"spring-boot\"}]}" >> $GITHUB_OUTPUT

      run: |
        echo "$(ls)"
        jsonJava="$(cat ${{ github.action_path }}/java.json)"
        echo "variant=${jsonJava}" >> $GITHUB_OUTPUT
       # echo "variant={\"variant\":[{\"library\":\"${{ github.action_path }}\",\"weblog\":\"jersey-grizzly2\"},{\"library\":\"$jsonJava\",\"weblog\":\"spring-boot\"}],\"version\":[\"prod\",\"dev\"]}" >> $GITHUB_OUTPUT
        
