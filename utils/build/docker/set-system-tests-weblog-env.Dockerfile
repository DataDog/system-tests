FROM system_tests/weblog

# Datadog setup
ENV DD_SERVICE=weblog
ENV DD_TRACE_HEADER_TAGS='user-agent:http.request.headers.user-agent'
ENV DD_TRACE_SAMPLE_RATE=0.5
ENV DD_TAGS='key1:val1, key2 : val2 '

ARG SYSTEM_TESTS_LIBRARY
ENV SYSTEM_TESTS_LIBRARY=$SYSTEM_TESTS_LIBRARY

ARG SYSTEM_TESTS_WEBLOG_VARIANT
ENV SYSTEM_TESTS_WEBLOG_VARIANT=$SYSTEM_TESTS_WEBLOG_VARIANT

ARG SYSTEM_TESTS_LIBRARY_VERSION
ENV SYSTEM_TESTS_LIBRARY_VERSION=$SYSTEM_TESTS_LIBRARY_VERSION

ARG SYSTEM_TESTS_PHP_APPSEC_VERSION
ENV SYSTEM_TESTS_PHP_APPSEC_VERSION=$SYSTEM_TESTS_PHP_APPSEC_VERSION

ARG SYSTEM_TESTS_LIBDDWAF_VERSION
ENV SYSTEM_TESTS_LIBDDWAF_VERSION=$SYSTEM_TESTS_LIBDDWAF_VERSION

# files for exotic scenarios
RUN echo "corrupted::data" > /appsec_corrupted_rules.yml
