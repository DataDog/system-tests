# Internal backend server on port 7778.
# Kong proxies to this; the ddtrace plugin instruments the request.
# This leverages Kong's own OpenResty â€” zero extra processes.

server {
    listen 7778;
    root /builds;

    location = /healthcheck {
        types { }
        default_type application/json;
        try_files /healthcheck.json =404;
    }

    location = /headers {
        types { }
        default_type text/plain;
        add_header content-language en-US always;
        try_files /headers.txt =404;
    }

    location / {
        types { }
        default_type text/plain;
        try_files /hello.txt =404;
    }
}
