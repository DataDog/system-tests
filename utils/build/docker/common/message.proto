syntax = "proto3";
package proto_message;

message AddressBook {
  map<int32, Person> people = 1; // checks that the types generated by the usage of a map are correctly handled
  PhoneNumber central = 2; // here to check that we don't re-extract the PhoneNumber message when we encounter it again
}

message PhoneNumber {
  string number = 1;
  PhoneType type = 2; // check that enum are handled properly
}

enum PhoneType {
  UNSPECIFIED = 0;
  MOBILE = 1;
  HOME = 2;
  WORK = 3;
}

message Person {
  string name = 1;
  repeated PhoneNumber phones = 4; // check repeated fields
  uint64 created = 5;
  double last_updated = 6;

  // this one is very artificial, but it's here to check that we stop at the same depth for all tracers
  RecursiveField recurse = 7;

  message RecursiveField {
    sint32 value = 1;
    RecursiveField deeper = 2;
  }
}
