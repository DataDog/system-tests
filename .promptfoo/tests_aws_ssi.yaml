  - description: "[AWS SSI] tests execution"
    vars:
      user_prompt: "I want to run the aws ssi tests"
    assert:
        - type: icontains-all
          value:
            - "pulumi"
            - "environment variables"
            - "wizard"
            - "manual"
            - "aws-vault"
            - "--vm-only"
        - type: icontains-any
          value:
            - "environment"
            - "wizard"

  - description: "[AWS SSI] onboarding tests execution"
    vars:
      user_prompt: "I want to run the onboarding tests"
    assert:
        - type: icontains-all
          value:
            - "pulumi"
            - "aws"
        - type: icontains-any
          value:
            - "environment"
            - "wizard"
        - type: icontains-any
          value:
            - "manual"
            - "command"
  - description: "[AWS SSI] Create new virtual machine - general"
    vars:
      user_prompt: "Create a new virtual machine for aws ssi tests"
    assert:
        - type: llm-rubric
          value: "you need the virtual machine details like name, AMI ID, branch, etc in order to register the new virtual machine in system-tests. This details are used to update the virtual_machines.json file. Sometimes it will ask the user for the details directly; other times it will infer and include the required information automatically."
          threshold: 0.75
        - type: icontains-all
          value:
            - "AMI ID"
            - "branch"
            - "virtual_machines.json"

  - description: "[AWS SSI] Create new virtual machine - specific"
    vars:
      user_prompt: "what i should do to create a new virtual machine for aws ssi tests with the name 'newvm' ami id ami-14567843, type linux debian, amd64, user test, branch mynewbranch"
    assert:
        - type: icontains-all
          value:
            - "virtual_machines.json"
            - "ami-14567843"
            - "aws_ssi_registration.py --vm"

  - description: "[AWS SSI] Create Python weblog for AWS SSI"
    vars:
      user_prompt: "what should i do to create a python weblog named 'my-python-weblog' for the aws ssi tests"
    assert:
        - type: icontains-all
          value:
            - "lib-injection"
            - "utils/build/virtual_machine/weblogs/python/provision_my-python-weblog.yml"
            - "aws_ssi_registration.py --weblog"
            - "aws_ssi.json"

  - description: "[AWS SSI] Create new scenario for AWS SSI"
    vars:
      user_prompt: "what should i do to create a new scenario named 'mynewprovision' for the aws ssi tests"
    assert:
        - type: icontains-all
          value:
            - "utils/build/virtual_machine/provisions/mynewprovision"
            - "utils/_context/_scenarios/__init__.py"
            - "InstallerAutoInjectionScenario"
        - type: icontains-any
          value:
            - "aws_ssi_registration.py --scenario"
            - "aws_ssi.json"
